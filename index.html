<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para mi Evelyn ğŸ’—</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --lila-fuerte: #7e57c2; --texto: #2d1b4d; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body { 
            height: 100vh; 
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%); 
            font-family: 'Quicksand', sans-serif; 
            display: flex; justify-content: center; align-items: center; 
            overflow: hidden; position: relative; 
        }

        .main-app { 
            width: 95%; max-width: 420px; height: 92vh; 
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(15px); border-radius: 40px; 
            border: 3px solid white; padding: 25px; 
            display: flex; flex-direction: column; 
            position: relative; box-shadow: 0 20px 50px rgba(126, 87, 194, 0.3); 
            z-index: 10; 
        }

        .screen { display: none; flex-direction: column; height: 100%; text-align: center; animation: fadeIn 0.5s ease forwards; }
        .screen.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .script-font { font-family: 'Dancing Script', cursive; font-size: 2.8rem; color: var(--lila-fuerte); margin-bottom: 10px; }
        .scrollable-content { overflow-y: auto; flex-grow: 1; padding-right: 5px; margin-bottom: 15px; text-align: left; }

        .message-bubble { 
            background: white; padding: 20px; border-radius: 25px; margin-bottom: 20px; 
            border-left: 8px solid var(--lila-fuerte); box-shadow: 0 5px 15px rgba(0,0,0,0.06);
            line-height: 1.5; color: var(--texto);
        }

        .polaroid-frame { 
            background: white; padding: 15px 15px 45px 15px; 
            box-shadow: 0 15px 30px rgba(0,0,0,0.15); transform: rotate(-3deg); 
            margin: 25px auto; width: 90%; cursor: pointer; 
        }
        .polaroid-frame img { width: 100%; border-radius: 5px; height: 250px; object-fit: cover; }

        .btn-next { 
            background: var(--lila-fuerte); color: white; border: none; 
            padding: 16px; border-radius: 50px; font-weight: 700; cursor: pointer; 
            box-shadow: 0 10px 20px rgba(126, 87, 194, 0.3); margin-top: auto;
        }

        .typing-text { 
            line-height: 1.6; 
            font-size: 1.05rem; 
            color: #333; 
            white-space: pre-wrap;
            word-break: break-word; /* Para que no se corte el texto */
        }

        .heart { position: absolute; top: -10%; font-size: 20px; user-select: none; pointer-events: none; animation: fall linear forwards; z-index: 5; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body>
    <audio id="bgMusic" loop><source src="cancion.mp3" type="audio/mpeg"></audio>

    <div class="main-app">
        <section id="inicio" class="screen active">
            <div style="font-size: 80px; margin: 30px 0;">ğŸŒ¸</div>
            <h1 class="script-font">Hola, Evelyn... âœ¨</h1>
            <p>He creado este espacio porque mi corazÃ³n tiene mucho que decirte. ğŸ’œ</p>
            <button class="btn-next" onclick="next('sinceridad')">Entrar ğŸ’—</button>
        </section>

        <section id="sinceridad" class="screen">
            <h2 class="script-font">Lo que guardo... ğŸ’œ</h2>
            <div class="scrollable-content">
                <div class="message-bubble">
                    <h3>ğŸ©¹ PerdÃ³n de corazÃ³n</h3>
                    <p>Evelyn, de verdad me disculpo por haber sido una mala persona contigo en esos momentos de inmadurez. No darte el lugar que mereces y hacerte sentir sola jamÃ¡s fue mi intenciÃ³n. âœ¨ğŸ’—</p>
                </div>
                <div class="message-bubble">
                    <h3>ğŸš« No estÃ¡s sola</h3>
                    <p>SÃ© que te han fallado antes, pero yo no soy asÃ­. Me quedarÃ© contigo todo el tiempo que me lo permitas. JamÃ¡s te voy a soltar. ğŸ ğŸ’—</p>
                </div>
            </div>
            <button class="btn-next" onclick="next('galeria')">Ver fotos ğŸ“¸</button>
        </section>

        <section id="galeria" class="screen">
            <h2 class="script-font">TÃº y Yo ğŸ“¸</h2>
            <div class="polaroid-frame" onclick="changePhoto()">
                <img src="foto1.png" id="main-img" onerror="this.src='https://via.placeholder.com/300x350?text=Foto'">
                <p style="font-family: 'Dancing Script'; font-size: 1.5rem; margin-top: 10px; color: var(--lila-fuerte);">Definitivamente tÃº ğŸ’—</p>
            </div>
            <button class="btn-next" onclick="next('final')">Mi Promesa âœï¸</button>
        </section>

        <section id="final" class="screen">
            <div class="scrollable-content" style="background: white; border-radius: 25px; padding: 25px; border: 1px solid #eee;">
                <div id="typing-box" class="typing-text"></div>
            </div>
            <button class="btn-next" onclick="location.reload()">Releer ğŸ’—</button>
        </section>
    </div>

    <script>
        const fotos = ["foto1.png", "foto2.png", "Roblox.png", "Juntos.png", "Eye y yo.png", "1.png"];
        let fotoIdx = 0;

        function next(id) {
            document.getElementById('bgMusic').play().catch(()=>{});
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'final') startTyping();
        }

        function changePhoto() {
            fotoIdx = (fotoIdx + 1) % fotos.length;
            document.getElementById('main-img').src = fotos[fotoIdx];
        }

        function startTyping() {
            const box = document.getElementById('typing-box');
            // Texto con emojis reales y saltos de lÃ­nea claros
            const parrafos = [
                "Evelyn, mi niÃ±ağŸ’—ğŸ’—...",
                "Quiero que leas esto con mucha calmağŸ˜¿. SÃ© que no siempre he sabido darte lo que mereces, y de verdad me disculpo por haber sido una mala persona contigo en esos momentos de inmadurezğŸ˜¿ğŸ˜¿ğŸ˜¿. No quiero que sientas que estÃ¡s sola o que me vas a perder.",
                "JamÃ¡s te dejarÃ© con el corazÃ³n en las manosğŸ˜¿; me quedarÃ© contigo todo el tiempo que me lo permitasğŸ’—ğŸ’—ğŸ’—, luchando por nosotros contra todo. Quiero que construyamos un futuro donde no existan dudas, solo este amor tan bonito que te tengo, que nos tenemosğŸ’—ğŸ’—ğŸ’—ğŸ’—.",
                "Gracias por elegirme cada dÃ­a, a pesar de mis fallas. Te amo para siempreğŸ’—ğŸ’—ğŸ’—ğŸ’—, definitivamente eres tÃºâœ¨ğŸ’—ğŸ’—ğŸ’œ."
            ];
            
            let pIdx = 0;
            box.innerHTML = "";

            function typeParagraph() {
                if (pIdx < parrafos.length) {
                    let pTag = document.createElement('p');
                    pTag.style.marginBottom = "15px";
                    box.appendChild(pTag);
                    
                    let charIdx = 0;
                    let currentText = parrafos[pIdx];

                    function typeChar() {
                        if (charIdx < currentText.length) {
                            // Detectar si lo que sigue es un emoji (caracter especial)
                            const char = currentText.match(/./u); 
                            pTag.innerHTML += currentText[charIdx];
                            
                            charIdx++;
                            setTimeout(typeChar, 30);
                            box.parentNode.scrollTop = box.parentNode.scrollHeight;
                        } else {
                            pIdx++;
                            setTimeout(typeParagraph, 500);
                        }
                    }
                    typeChar();
                } else {
                    setInterval(createHeart, 400);
                }
            }
            typeParagraph();
        }

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = 'ğŸ’—';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 3 + 2) + 's';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 5000);
        }
    </script>
</body>
</html>
